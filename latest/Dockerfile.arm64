FROM ghcr.io/dockhippie/alpine:latest-arm64@sha256:a08ec5f5aaf68c73e1ae4d1cfe9949dccf9e3f0c49d8088a0f0c42491ef77cd3

WORKDIR /srv/app

COPY ./overlay /

RUN apk update && \
  apk upgrade && \
  apk add tzdata git build-base libffi-dev libxml2-dev libxslt-dev openssl-dev ruby-dev ruby ruby-bundler ruby-rake ruby-io-console ruby-bigdecimal ruby-irb ruby-rdoc ruby-minitest ruby-json ruby-etc && \
  bundle config build.nokogiri --use-system-libraries && \
  rm -rf /var/cache/apk/*
